//! dna.js v2.0.0 ~~ https://dnajs.org ~~ MIT License
function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var dnaArray={find:function find(a,b){var c,d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"code",e=Array.isArray(a),f=0;if(e)for(;f<a.length&&(null===(c=a[f])||void 0===c?void 0:c[d])!==b;)f++;return e&&f<a.length?{index:f,item:a[f]}:{index:-1,item:null}},last:function last(a){return Array.isArray(a)?a[a.length-1]:void 0},fromMap:function fromMap(a,b){var c=Object.assign(Object.assign({},{key:"code",kebabCodes:!1}),b),d=function(a){return c.kebabCodes?dna.util.toKebab(a):a},e=function(a){return dna.util.isObj(a)?a:{value:a}};return Object.keys(a).map(function(b){return Object.assign(_defineProperty({},c.key,d(b)),e(a[b]))})},toMap:function toMap(a,b){var c=Object.assign(Object.assign({},{key:"code",camelKeys:!1}),b),d={};return a.forEach(c.camelKeys?function addObjCamelKey(a){return d[dna.util.toCamel(a[c.key])]=a}:function addObj(a){return d[a[c.key]]=a}),d},wrap:function wrap(a){return null===a||a===void 0?[]:Array.isArray(a)?a:[a]}},dnaBrowser={getUrlParams:function getUrlParams(){var a={},b=function(b){return a[b[0]]=b[1]};return window.location.search.slice(1).split("&").forEach(function addPair(a){return a&&b(a.split("="))}),a}},dnaPageToken={put:function put(a,b){return window.sessionStorage[a+window.location.pathname]=JSON.stringify(b),b},get:function get(a,b){var c=window.sessionStorage[a+window.location.pathname];return c===void 0?b:JSON.parse(c)}},dnaUi={deleteElem:function deleteElem(a,b){var c=dna.ui.toElem(a,this);return dna.core.remove(c,b)},focus:function focus(a){return a.trigger("focus")},getAttrs:function getAttrs(a){return a[0]?Object.values(a[0].attributes):[]},getComponent:function getComponent(a){return a.closest("[data-component]")},pulse:function pulse(a,b){var c=Object.assign(Object.assign({},{duration:400,interval:0,out:5e3}),b),d={hide:{opacity:0},show:{opacity:1}};return a.stop(!0).slideDown().css(d.hide).animate(d.show,c.duration),c.interval&&a.animate(d.show,c.interval).animate(d.hide,c.out),a},slideFade:function slideFade(a,b,c){var d={opacity:1,transition:"opacity 400ms"},e={transition:"opacity 0s"};return c&&window.setTimeout(function doEaseIn(){return a.css(d)},200)?a.css({opacity:0,transition:"opacity 0s"}).hide().delay(100).slideDown(b||void 0):a.css({opacity:0,transition:"opacity 400ms"}).delay(100).slideUp(b||void 0),a.delay(200).promise().then(function clearTransition(){return a.css(e)}),a},slideFadeIn:function slideFadeIn(a,b){return dna.ui.slideFade(a,b,!0)},slideFadeOut:function slideFadeOut(a,b){return dna.ui.slideFade(a,b,!1)},slideFadeToggle:function slideFadeToggle(a,b){return dna.ui.slideFade(a,b,a.is(":hidden"))},slideFadeDelete:function slideFadeDelete(a,b){return dna.ui.slideFadeOut(a,function(){return dna.ui.deleteElem(a,b)})},smoothHeightSetBaseline:function smoothHeightSetBaseline(a){var b=$("body"),c=b.data().dnaCurrentContainer=a||b,d=c.outerHeight();return c.css({minHeight:d,maxHeight:d,overflow:"hidden"})},smoothHeightAnimate:function smoothHeightAnimate(a,b){var c=b||$("body").data().dnaCurrentContainer;window.setTimeout(function animate(){c.css({minHeight:0,maxHeight:"100vh"});window.setTimeout(function turnOffTransition(){return c.css({transition:"none",maxHeight:"none"})},1e3)},a||50);return window.setTimeout(function setAnimationLength(){return c.css({transition:"all 1s"})},10),c},smoothMove:function smoothMove(a,b,c){var d="function"==typeof c?c:null,e=b?a.prev():a.next();return e.length?function move(){var c=e.clone(!0);b?a.after(e.hide()).before(c):a.before(e.hide()).after(c);var f=0,g=function(){return f++&&d&&d(a)};window.setTimeout(function animate(){dna.ui.slideFadeIn(e,g),dna.ui.slideFadeDelete(c,g)})}():d&&d(a),a},smoothMoveUp:function smoothMoveUp(a,b){return dna.ui.smoothMove(a,!0,b)},smoothMoveDown:function smoothMoveDown(a,b){return dna.ui.smoothMove(a,!1,b)},toElem:function toElem(a,b){var c=a instanceof $&&a,d=a&&a.target;return c||$(d||a||b)}},dnaUtil={apply:function apply(a,b){var c,d=dna.array.wrap(b),e=d[0]instanceof $?d[0]:null,f=function(b,g){var h=function(){return b[g[0]]},i=!b||1===g.length&&"function"!=typeof b[g[0]];dna.core.assert(!i,"Callback function not found",a),1===g.length?c=h().apply(e,d):f(h(),g.slice(1))};return e&&0===e.length?c=e:"function"==typeof a?c=a.apply(e,d):e&&e[a]?c=e[a](d[1],d[2],d[3]):"string"==typeof a&&0<a.length?function findFn(a){e&&d.push(dna.ui.getComponent(e));var b=dna.events.getContextDb(),c=a[0],g=(null,eval);/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(c)&&function isUnknown(){return void 0===window[c]&&!b[c]}()&&function callable(){return["object","function"].includes(g("typeof "+c))}()&&dna.registerContext(c,g(c)),f(b[c]?b:window,a)}(a.split(".")):void 0===a||null===a?c=null:dna.core.assert(!1,"Invalid callback function",a),c},assign:function assign(a,b,c){var d="string"==typeof b?b.split("."):b,e=d[0],f=$.isPlainObject(a)?a:{};return 1===d.length?f[e]=c:dna.util.assign(function nestedData(){return void 0===f[e]?f[e]={}:f[e]}(),d.slice(1),c),f},printf:function printf(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.reduce(function(a,b){return a.replace(/%s/,b+"")},a)},realTruth:function realTruth(a){return!!a&&!function emptyArray(){return a instanceof Array&&0===a.length}()&&!function falseyStr(){return /^(f|false|n|no|0)$/i.test(a+"")}()},toCamel:function toCamel(a){return(a+"").replace(/-(.)/g,function hump(a,b){return b.toUpperCase()})},toKebab:function toKebab(a){return(""+a).replace(/([A-Z]+)/g,function dash(a){return"-"+a.toLowerCase()}).replace(/\s|^-/g,"")},value:function value(a,b){return"string"==typeof b&&(b=b.split(".")),null===a||void 0===a||void 0===b?null:1===b.length?a[b[0]]:dna.util.value(a[b[0]],b.slice(1))},isObj:function isObj(a){return!!a&&"object"===_typeof(a)&&!Array.isArray(a)}},dnaFormat={getCurrencyFormatter:function getCurrencyFormatter(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,c={style:"currency",currency:a.toUpperCase()},d=new Intl.NumberFormat([],c).format;return function(a){return d(+a/b)}},getDateFormatter:function getDateFormatter(a){var b=function(a){return(a+"").padStart(2,"0")},c=function generalDate(a){return"".concat(a.getFullYear(),"-").concat(b(a.getMonth()+1),"-").concat(b(a.getDate()))},d=function generalTime(a){return a.toLocaleString([],{hour:"numeric",minute:"2-digit"}).replace(" ","").toLowerCase()},e=function(a){return c(a)+" "+d(a)},f={date:function date(a){return new Date(a).toDateString()},general:function general(a){return e(new Date(a))},generalDate:function generalDate(a){return c(new Date(a))},generalTime:function generalTime(a){return d(new Date(a))},iso:function iso(a){return new Date(a).toISOString()},locale:function locale(a){return new Date(a).toLocaleString()},localeDate:function localeDate(a){return new Date(a).toLocaleDateString()},localeTime:function localeTime(a){return new Date(a).toLocaleTimeString()},string:function string(a){return new Date(a).toString()},time:function time(a){return new Date(a).toTimeString()},utc:function utc(a){return new Date(a).toUTCString()}}[dna.util.toCamel(a)];return dna.core.assert(f,"Unknown date format code",a),f},getNumberFormatter:function getNumberFormatter(a){dna.core.assert(/^#([.]#+)?$/.test(a),"Unknown numeric format code",a);var b="#"===a?0:a.length-2;return new Intl.NumberFormat([],{minimumFractionDigits:b,maximumFractionDigits:b}).format},getPercentFormatter:function getPercentFormatter(a){dna.core.assert(/^#([.]#+)?$/.test(a),"Unknown percent format code",a);var b="#"===a?0:a.length-2;return new Intl.NumberFormat([],{style:"percent",minimumFractionDigits:b,maximumFractionDigits:b}).format},getFormatter:function getFormatter(a){return function(b,c){return dna.util.apply(a,[b,c])+""}}},dnaPlaceholder={setup:function setup(){$("option.dna-template").closest("select").addClass("dna-hide");return $("[data-placeholder]").forEach(function fade(a){return dna.getClones(a.stop(!0).data().placeholder).length?a.fadeOut():a.fadeIn()})}},dnaPanels={display:function display(a,b,c){var d=a.data().dnaPanels,e=a.data().nav,f=a.find(".menu-item"),g=function bound(a){var b=Math.max,c=Math.min;return b(0,c(a,f.length-1))}(void 0===b?dna.pageToken.get(e,0):b);a[0].nodeName==="SELECT"&&(a[0].selectedIndex=g),f.removeClass("selected").addClass("unselected"),f.eq(g).addClass("selected").removeClass("unselected"),d.hide().removeClass("displayed").addClass("hidden");var h=d.eq(g).fadeIn().addClass("displayed").removeClass("hidden"),i=h.data().hash;return dna.pageToken.put(e,g),c&&i&&window.history.pushState(null,"","#"+i),dna.util.apply(a.data().callback,[h,i]),h},clickRotate:function clickRotate(a){var b=$(a.target).closest(".menu-item"),c=b.closest(".dna-menu");return dna.panels.display(c,c.find(".menu-item").index(b),!0)},selectRotate:function selectRotate(a){var b=$(a.target);return dna.panels.display(b,b.find("option:selected").index(),!0)},initialize:function initialize(a){var b=function(){var b="dna-panels-"+$("body").data().dnaPanelNextNav++;return a.attr("data-nav",b).prev(".dna-menu").attr("data-nav",b),b},c=!a.length||a.hasClass("dna-panels-initialized");return c||a.children().hasClass("dna-template")||function init(){var c=a.data().nav||b(),d=$(".dna-menu[data-nav="+c+"]").addClass("dna-panels-initialized"),e=a.addClass("dna-panels-initialized").children().addClass("panel"),f=window.location.hash.replace(/[^\w-]/g,""),g=f&&e.first().data().hash?function hashIndex(){return e.filter("[data-hash="+f+"]").index()}():function savedIndex(){return dna.pageToken.get(c,0)}();dna.core.assert(d.length,"Menu not found for panels",c),d.data().dnaPanels=e,d.find(".menu-item").length||d.children().addClass("menu-item"),dna.panels.display(d,g)}(),a},setup:function setup(){$("body").data().dnaPanelNextNav=1;var a=$(".dna-panels").forEach(dna.panels.initialize);return $(window.document).on({click:dna.panels.clickRotate},".dna-menu .menu-item"),$(window.document).on({change:dna.panels.selectRotate},".dna-menu"),a}},dnaCompile={regex:{dnaField:/^[\s]*(~~|\{\{).*(~~|\}\})[\s]*$/,dnaBasePair:/~~|{{|}}/,dnaBasePairs:/~~|\{\{|\}\}/g},setupNucleotide:function setupNucleotide(a){return a.data().dnaRules||(a.data().dnaRules={}),a.addClass("dna-nucleotide")},isDnaField:function isDnaField(a,b){var c=b.childNodes[0];return c&&!!c.nodeValue&&function matches(){var a;return!(!(null!==(a=c.nodeValue)&&void 0!==a)||!a.match(dna.compile.regex.dnaField))}()},addFieldClass:function addFieldClass(a){var b=a.data().dnaField;return b?a.addClass("dna-field-"+function htmlCase(){return dna.util.toKebab(b).replace(/[[\]]/g,"").replace(/[.]/g,"-")}()):a},field:function field(a){dna.compile.setupNucleotide(a),a.data().dnaField=a.text().replace(dna.compile.regex.dnaBasePairs,"").trim(),dna.compile.addFieldClass(a),a.is("textarea")?a.addClass("dna-update-model").data().dnaRules.val=!0:a.data().dnaRules.text=!0,a.empty()},propsAndAttrs:function propsAndAttrs(a){var b=[],c=[],d=[],e=function(c,e){d.push(c),c=c.replace(/^data-prop-/,"").toLowerCase(),e=e.replace(dna.compile.regex.dnaBasePairs,""),b.push(c,e),"checked"===c&&a.is("input")&&(a.addClass("dna-update-model").data().dnaField=e)},f=function(b,e){var f=e.split(dna.compile.regex.dnaBasePair);"[count]"===f[1]?f[1]=1:"[value]"===f[1]&&(f[1]=2),c.push(b.replace(/^data-attr-/,""),f),d.push(b);var g=a.is("input:not(:checkbox, :radio)")&&"value"===b&&""===f[0]&&""===f[2];(g||a.is("select")&&"data-option"===b)&&function makeUpdatable(){dna.compile.setupNucleotide(a).addClass("dna-update-model"),a.data().dnaField=f[1],a.data().dnaRules.val=!0}()};dna.ui.getAttrs(a).forEach(function compile(a){/^data-prop-/.test(a.name)?e(a.name,a.value):3===a.value.split(dna.compile.regex.dnaBasePair).length&&f(a.name,a.value)});var g=function(){return dna.compile.setupNucleotide(a).data().dnaRules};0<b.length&&(g().props=b),0<c.length&&(g().attrs=c),a.data().formatCurrency&&(g().formatter=dnaFormat.getCurrencyFormatter(a.data().formatCurrency)),a.data().formatCurrency100&&(g().formatter=dnaFormat.getCurrencyFormatter(a.data().formatCurrency100,100)),a.data().formatCurrency1000&&(g().formatter=dnaFormat.getCurrencyFormatter(a.data().formatCurrency100,1e3)),a.data().formatDate&&(g().formatter=dnaFormat.getDateFormatter(a.data().formatDate)),a.data().formatNumber&&(g().formatter=dnaFormat.getNumberFormatter(a.data().formatNumber)),a.data().formatPercent&&(g().formatter=dnaFormat.getPercentFormatter(a.data().formatPercent)),a.data().format&&(g().formatter=dnaFormat.getFormatter(a.data().format)),a.data().transform&&(g().transform=a.data().transform),a.data().callback&&(g().callback=a.data().callback),dna.compile.addFieldClass(a),a.removeAttr(d.join(" "))},getDataField:function getDataField(a,b){return a.data(b).replace(dna.compile.regex.dnaBasePairs,"").trim()},subTemplateName:function subTemplateName(a,b,c){var d=a instanceof $?function getRules(){return dna.getClone(a,{main:!0}).data().dnaRules}().template:a;return d+"-"+b+"--"+(c+"")},rules:function rules(a,b,c){return a.filter("[data-"+b+"]").forEach(function addRule(a){dna.compile.setupNucleotide(a);var d=dna.compile.getDataField(a,b);a.data().dnaRules[b]=c?function makeLists(){return d.split(";").map(function(a){return a.split(",")})}():d}).removeAttr("data-"+b)},separators:function separators(a){var b=function(a,b){return 3===b.nodeType&&!/\S/.test(b.nodeValue)},c=function(a,c,d){return c&&function doAppend(){a.contents().last().filter(b).remove(),a.append($("<span>").addClass(d).html(c))}()},d=a.find(".dna-template, .dna-sub-clone").addBack();return d.forEach(function processTemplate(a){c(a,a.data().separator,"dna-separator"),c(a,a.data().lastSeparator,"dna-last-separator")}),d},template:function template(a){var b=$("#"+a);dna.core.assert(b.length,"Template not found",a);var c=function(a){return a.data().dnaRules.subs=[]};b.find(".dna-template").addBack().forEach(function saveName(a){return a.data().dnaRules={template:a.attr("id"),subs:[]}}).removeAttr("id").forEach(c);var d=b.find("*").addBack();d.filter(dna.compile.isDnaField).forEach(dna.compile.field).addClass("dna-field"),dna.compile.rules(d,"array").addClass("dna-sub-clone").forEach(c),dna.compile.rules(d,"class",!0),dna.compile.rules(d,"require"),dna.compile.rules(d,"missing"),dna.compile.rules(d,"true"),dna.compile.rules(d,"false"),d.forEach(dna.compile.propsAndAttrs),dna.compile.separators(b);return $("input[data-attr-type]").forEach(function setTypeAttr(a){return a.attr({type:a.data().attrType})}),dna.store.stash(b)}},dnaStore={getTemplateDb:function getTemplateDb(){var a=$("body").data();return a.dnaTemplateDb||function initStore(){return a.dnaTemplateDb={}}()},stash:function stash(a){var b=a.data().dnaRules.template,c=function(a){var b=a.data().dnaRules.template,c=a.parent(),d=1===c.children().length&&!c.hasClass("dna-container");d||c.data().dnaContents||function compileSiblings(){c.data().dnaContents=!0;c.data().dnaContents=c.children().toArray().map(function templateName(a){var c=$(a);return c.hasClass("dna-template")?function compileToName(a){return a?dna.compile.template(a).name:b}(c.attr("id")):!!c.hasClass("dna-sub-clone")&&c.data().dnaRules.template})}();var e={name:b,elem:a,container:c.addClass("dna-container").addClass("dna-contains-"+b),nested:0!==c.closest(".dna-clone").length,separators:a.find(".dna-separator, .dna-last-separator").length,wrapped:d};dna.store.getTemplateDb()[b]=e,a.removeClass("dna-template").addClass("dna-clone").addClass(b).detach()};return a.find(".dna-template").addBack().forEach(c),a.find(".dna-sub-clone").forEach(function prepLoop(a){var c=a.data().dnaRules,d=dna.compile.setupNucleotide(a.parent()).addClass("dna-array"),e=d.closest(".dna-clone, .dna-sub-clone").data().dnaRules;c.template=dna.compile.subTemplateName(b,c.array,e.subs.length),d.data().dnaRules.loop={name:c.template,field:c.array},e.subs.push(c.array)}).forEach(c),dna.store.getTemplateDb()[b]},getTemplate:function getTemplate(a){return dna.store.getTemplateDb()[a]||dna.compile.template(a)}},dnaEvents={getContextDb:function getContextDb(){var a=$("body").data();return a.dnaContextDb||function initStore(){return a.dnaContextDb={}}()},getInitializers:function getInitializers(){var a=$("body").data()||{};return a.dnaInitializers||function initStore(){return a.dnaInitializers=[]}()},runOnLoads:function runOnLoads(){var a=$("[data-on-load]").not(".dna-loaded");return a.forEach(function run(a){return dna.util.apply(a.data().onLoad,a)}).addClass("dna-loaded")},runInitializers:function runInitializers(a){return dna.events.getInitializers().forEach(function init(b){var c=b.selector?function find(b){return a.find(b).addBack(b)}(b.selector):a,d=[c.addClass("dna-initialized")].concat(_toConsumableArray(dna.array.wrap(b.params)));dna.util.apply(b.fn,d)}),a},setup:function setup(){var a=function(b,c,d){var e=b.closest("[data-"+c+"]"),f=e.data(c),g=e[0]&&"A"===e[0].nodeName;"click"===c&&g&&f&&f.match(/^dna[.]/)&&d.preventDefault();var h=e.parent().closest("[data-click]");return"click"===c&&h.length&&a(h,c,d),dna.util.apply(f,[e,d])},b=function(b){var c=$(b.target),d=function(a,b){return dna.util.assign(dna.getModel(a),a.data().dnaField,b(a))},e=function(a){return a.val()},f=function(a){return a.is(":checked")},g=function(a){return d(a,f)};return c.hasClass("dna-update-model")&&function updateModel(){var a=dna.getClone(c,{main:!0});0===a.length||(c.is("input:checkbox")?d(c,f):c.is("input:radio")?$("input:radio[name="+c.attr("name")+"]").forEach(g):c.data().dnaRules.val&&d(c,e),dna.refresh(a))}(),a(c,b.type.replace("key","key-"),b)},c=function(b){var c=$(b.target),d=c.data(),e=function(){d.dnaLastUpdated=Date.now(),d.dnaLastValue=c.val(),d.dnaTimeoutId=null,a(c,"smart-update",b)},f=function(){var a=d.smartThrottle?+d.smartThrottle:1000;Date.now()<d.dnaLastUpdated+a?d.dnaTimeoutId=window.setTimeout(e,a):e()},g=function(){c.val()===d.dnaLastValue||d.dnaTimeoutId||f()};d.smartUpdate&&function processSmartUpdate(){"keydown"===b.type&&void 0===d.dnaLastValue&&(d.dnaLastValue=c.val()),window.setTimeout(g)}()},d=function(b){return function(c){return a($(c.target),b,c)}};return $(window.document).on({click:b,change:b,keydown:b,keypress:b,keyup:b,input:b}).on({keydown:c,keyup:c,change:c,cut:c,paste:c}).on({keyup:function handleEnterKey(b){return"Enter"===b.key&&a($(b.target),"enter-key",b)}}).on({click:function jumpToUrl(a){var b=$(a.target).closest("[data-href]"),c=/iPad|iPhone|iPod/.test(window.navigator.userAgent)&&/Apple/.test(window.navigator.vendor),d=b.closest(".external-site").length?"_blank":"_self";window.open(b.data().href,c?"_self":b.data().target||d)}},"[data-href]").on({focusin:d("focus-in")},"[data-focus-in]").on({focusout:d("focus-out")},"[data-focus-out]").on({mouseenter:d("hover-in")},"[data-hover-in]").on({mouseleave:d("hover-out")},"[data-hover-out]"),dna.events.runOnLoads()}},dnaCore={inject:function inject(a,b,c,d){var e=function(a,e,f){var g="[count]"===e?c:"[value]"===e?b:dna.util.value(b,e),h=function(){return f.formatter?f.formatter(g,b):g+""};["string","number","boolean"].includes(_typeof(g))&&(a=d.html?a.html(h()):a.text(h()))},f=function(a,d){var e="[count]"===d?c:"[value]"===d?b:dna.util.value(b,d);null!==e&&e!==a.val()&&a.val(e+"")},g=function(a,c){for(var d=0;d<c.length/2;d++)a.prop(c[2*d],dna.util.realTruth(dna.util.value(b,c[2*d+1])))},h=function(a,d){for(var e=d.attrs,f=function(e,f){var g=f[1],h=1===g?c:2===g?b:dna.util.value(b,g),i=[f[0],h,f[2]].join(""),j=d.formatter?d.formatter(i,b):i;a.attr(e,j),/^data-./.test(e)&&a.data(e.substring(5),j),"value"===e&&i!==a.val()&&a.val(i)},g=0;g<e.length/2;g++)f(e[2*g],e[2*g+1])},i=function(a,c){c.forEach(function process(c){var d=dna.util.value(b,c[0]),e=dna.util.realTruth(d);1===c.length?a.addClass(d+""):1<c.length&&function setBooleanClasses(){a.toggleClass(c[1],e),c[2]&&a.toggleClass(c[2],!e)}()})},j=function(a){var c=dna.util.value(b,a);return void 0!==c&&null!==c},k=function(a,c){var e=dna.util.value(b,c.field),f=a.children("."+c.name.replace(/[.]/g,"\\."));e?e.length===f.length?f.forEach(function injectSubClone(a,b){a.is("option")||dna.core.inject(a,e[b],b+1,d)}):function rebuildSubClones(){f.remove(),dna.clone(c.name,e,{container:a,html:!!d.html})}():b[c.field]=[]},l=function process(a){var c=a.data().dnaRules;c.transform&&dna.util.apply(c.transform,b),c.loop&&k(a,c.loop),c.text&&e(a,a.data().dnaField,c),c.val&&f(a,a.data().dnaField),c.props&&g(a,c.props),c.attrs&&h(a,c),c["class"]&&i(a,c["class"]),c.require&&a.toggle(j(c.require)),c.missing&&a.toggle(!j(c.missing)),c["true"]&&a.toggle(dna.util.realTruth(dna.util.value(b,c["true"]))),c["false"]&&a.toggle(!dna.util.realTruth(dna.util.value(b,c["false"]))),c.callback&&dna.util.apply(c.callback,a)},m=function(a){a.filter(".dna-nucleotide").forEach(l),a.length&&m(a.children().not(".dna-sub-clone"))};return d.transform&&d.transform(b),m(a),a.data().dnaModel=b,a.data().dnaCount=c,a},replicate:function replicate(a,b,c){var d=".dna-contains-"+a.name.replace(/[.]/g,"\\."),e=c.container?c.container.find(d).addBack(d):a.container,f=a.elem.clone(!0,!0),g=f.data().dnaRules.template;e.data().dnaCountsMap||(e.data().dnaCountsMap={});var h=e.data().dnaCountsMap;h[g]=(h[g]||0)+1,dna.core.inject(f,b,h[g],c);return a.wrapped?c.top?e.prepend(f):e.append(f):function intoUnwrapped(){var b=e.children(".dna-clone"),d=b.filter("."+a.name);d.length?c.top?d.first().before(f):d.last().after(f):function firstClone(){var c=e.data().dnaContents,d=c.indexOf(a.name),g=e.children().eq(d+c.reduce(function adjustment(a,e){return a+(e&&c.indexOf(e)<d?b.filter("."+e).length-1:0)},0));g.length?g.before(f):e.append(f)}()}(),a.separators&&function displaySeparators(){var b=e.children("."+a.name);b.find(".dna-separator").show().end().last().find(".dna-separator").hide(),b.find(".dna-last-separator").hide().end().eq(-2).find(".dna-last-separator").show().closest(".dna-clone").find(".dna-separator").hide()}(),dna.events.runInitializers(f),c.callback&&c.callback(f,b),c.fade&&dna.ui.slideFadeIn(f),f},getArrayName:function getArrayName(a){return a.hasClass("dna-sub-clone")?a.data().dnaRules.array:null},updateModelArray:function updateModelArray(a){dna.core.assert(a.hasClass("dna-array"),"Invalid array container",a.attr("class"));var b=a.data().dnaRules.loop,c=a.children("."+b.name),d=dna.getModel(a);return d[b.field]=c.toArray().map(function nodeToModel(a){return dna.getModel($(a))}),a},remove:function remove(a,b){var c=a.parent();return a.detach(),a.hasClass("dna-sub-clone")&&dna.core.updateModelArray(c),dna.placeholder.setup(),a.remove(),b&&b(a,dna.getModel(a)),a},assert:function assert(a,b,c){try{if(!a)throw Error("[dna.js] "+b+": "+(c+""))}catch(a){throw console.error(a.stack),Error(a.message)}},plugin:function plugin(){$.fn.forEach=function(a){var b=this;return b.each(function(b,c){return a($(c),b)})},$.fn.dna=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=this,f=dna[dna.util.toCamel(a)];dna.core.assert(f,"Unknown plugin action",a);return e.forEach(function callApi(a){return f.apply(void 0,[a].concat(c))})}},setup:function setup(){return"object"===("undefined"==typeof window?"undefined":_typeof(window))&&"function"==typeof $&&function setupBrowser(){dna.core.plugin(),$(dna.placeholder.setup),$(dna.panels.setup),$(dna.events.setup)}(),dna}},dna={version:"2.0.0",clone:function clone(a,b,c){var d,e=Object.assign(Object.assign({},{fade:!1,top:!1,container:null,empty:!1,clones:1,html:!1,transform:null,callback:null}),c),f=dna.store.getTemplate(a),g=f.nested&&!e.container;dna.core.assert(!g,"Container missing for nested template",a),e.empty&&dna.empty(a);var h=(d=[]).concat.apply(d,_toConsumableArray(Array(e.clones).fill(b))),i=$(),j=function(a){return i=i.add(dna.core.replicate(f,a,e))};return h.forEach(j),dna.placeholder.setup(),dna.panels.initialize(i.first().closest(".dna-panels")),i.first().parents(".dna-hide").removeClass("dna-hide").addClass("dna-unhide"),i},arrayPush:function arrayPush(a,b,c,d){return a.data().dnaRules.subs.forEach(function cloneSub(e,f){e===b&&function clone(){var e=dna.compile.subTemplateName(a,b,f),g=".dna-contains-"+e,h={container:a.find(g).addBack(g)};dna.clone(e,c,Object.assign(Object.assign({},h),d)),dna.core.updateModelArray(h.container)}()}),a},cloneSub:function cloneSub(a,b,c,d){return console.log("DEPRECATED: Function dna.cloneSub() has been renamed to dna.arrayPush()."),dna.arrayPush(a,b,c,d)},createTemplate:function createTemplate(a,b,c){return $(b).attr({id:a}).addClass("dna-template").appendTo(c),dna.store.getTemplate(a)},templateExists:function templateExists(a){return!!dna.store.getTemplateDb()[a]||0<$(".dna-template#"+a).length},getModel:function getModel(a,b){var c=function(a){return dna.getClone($(a),b).data("dnaModel")};return"string"==typeof a?function getAll(a){return dna.getClones(a).toArray().map(function(a){return c($(a))})}(a):c(a)},empty:function empty(a,b){var c=Object.assign(Object.assign({},{fade:!1,callback:null}),b),d=dna.store.getTemplate(a),e=d.container.children(".dna-clone");d.container.data().dnaCountsMap&&(d.container.data().dnaCountsMap[a]=0);return c.fade?function fadeDelete(){return dna.ui.slideFadeDelete(e,c.callback)}():dna.core.remove(e,c.callback)},insert:function insert(a,b,c){var d=dna.getClones(a).first();return d.length?dna.refresh(d,{data:b,html:!(!(null!==c&&void 0!==c)||!c.html)}):dna.clone(a,b,c)},refresh:function refresh(a,b){var c=Object.assign(Object.assign({},{html:!1}),b),d=dna.getClone(a,b),e=c.data?c.data:dna.getModel(d);return dna.core.inject(d,e,d.data().dnaCount,c)},refreshAll:function refreshAll(a,b){var c=dna.getClones(a);return c.toArray().forEach(function refresh(a){dna.refresh($(a),b)}),c},updateField:function updateField(a,b){var c=a.data()&&a.data().dnaField;return c&&function update(){a.is("input:checkbox")?a.prop("checked",!!b):a.is("input:radio")?a.prop("checked",!!b):a.is("input, select, textarea")&&a.val(b+"");var d=dna.getModel(a);d[c]=b}(),a},recount:function recount(a,b){a=dna.getClone(a);var c=function(){var c=a.data().dnaRules.template,d=a.parent(),e=d.children(".dna-clone."+c).forEach(function update(a,c){a.data().dnaCount=c+1,dna.refresh(a,b)});d.data().dnaCountsMap=d.data().dnaCountsMap||{},d.data().dnaCountsMap[c]=e.length};return a.length&&c(),a},destroy:function destroy(a,b){var c=Object.assign(Object.assign({},{main:!1,fade:!1,callback:null}),b);a=dna.getClone(a,b);var d=dna.core.getArrayName(a);d&&dna.getModel(a.parent())[d].splice(dna.getIndex(a),1);var e=function(){return dna.ui.slideFadeDelete(a,c.callback)};return c.fade?e():dna.core.remove(a,c.callback)},getClone:function getClone(a,b){var c=Object.assign(Object.assign({},{main:!1}),b),d=c.main?".dna-clone:not(.dna-sub-clone)":".dna-clone";return a instanceof $?a.closest(d):$()},getClones:function getClones(a){return dna.store.getTemplate(a).container.children(".dna-clone."+a)},getIndex:function getIndex(a,b){var c=dna.getClone(a,b);return c.parent().children(".dna-clone."+c.data().dnaRules.template).index(c)},up:function up(a,b){var c=dna.ui.toElem(a,this);return dna.ui.smoothMoveUp(dna.getClone(c),b)},down:function down(a,b){var c=dna.ui.toElem(a,this);return dna.ui.smoothMoveDown(dna.getClone(c),b)},bye:function bye(a,b){var c=dna.ui.toElem(a,this),d="function"==typeof b?b:null;return dna.destroy(c,{fade:!0,callback:d})},registerInitializer:function registerInitializer(a,b){var c=Object.assign(Object.assign({},{selector:null,params:null,onDocLoad:!0}),b),d=c.selector;c.onDocLoad&&dna.util.apply(a,[function onDocLoadElems(){return d?$(d).not(".dna-template").not(d).addClass("dna-initialized"):$(window.document)}()].concat(_toConsumableArray(dna.array.wrap(c.params))));var e={fn:a,selector:d,params:c.params};return dna.events.getInitializers().push(e),dna.events.getInitializers()},clearInitializers:function clearInitializers(){return dna.events.getInitializers().splice(0)},registerContext:function registerContext(a,b){return dna.events.getContextDb()[a]=b,dna.events.getContextDb()},initGlobal:function initGlobal(a,b){a.$=b,a.dna=dna;var c=function(a){var b;return!globalThis[a]||null!==(b=Object.getOwnPropertyDescriptor(globalThis,a))&&void 0!==b&&b.writable};return c("window")&&(globalThis.window=a),c("document")&&(globalThis.document=a.document),c("$")&&(globalThis.$=b),c("dna")&&(globalThis.dna=dna),dna.core.setup()},info:function info(){var a=Object.keys(dna.store.getTemplateDb()),b=$(".dna-menu.dna-panels-initialized");return{version:dna.version,templates:a.length,clones:$(".dna-clone:not(.dna-sub-clone)").length,subs:$(".dna-sub-clone").length,names:a,store:dna.store.getTemplateDb(),initializers:dna.events.getInitializers(),panels:b.toArray().map(function(a){return $(a).attr("data-nav")})}},array:dnaArray,browser:dnaBrowser,pageToken:dnaPageToken,ui:dnaUi,util:dnaUtil,format:dnaFormat,placeholder:dnaPlaceholder,panels:dnaPanels,compile:dnaCompile,store:dnaStore,events:dnaEvents,core:dnaCore};dna.core.setup(),"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(window.dna=dna);
