//! dna.js v1.7.1 ~~ dnajs.org ~~ MIT License
function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var dnaArray={find:function find(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"code",d=Array.isArray(a),e=0;if(d)for(;e<a.length&&(null===(f=a[e])||void 0===f?void 0:f[c])!==b;){var f;e++}return d&&e<a.length?{index:e,item:a[e]}:{index:-1}},last:function last(a){return Array.isArray(a)&&a.length?a[a.length-1]:null},fromMap:function fromMap(a,b){var c=_objectSpread(_objectSpread({},{key:"code",kebabCodes:!1}),b),d=function(a){return c.kebabCodes?dna.util.toKebab(a):a},e=function(a){return dna.util.isObj(a)?a:{value:a}};return Object.keys(a).map(function(b){return _objectSpread(_objectSpread({},_defineProperty({},c.key,d(b))),e(a[b]))})},toMap:function toMap(a,b){var c=_objectSpread(_objectSpread({},{key:"code",camelKeys:!1}),b),d={};return a.forEach(c.camelKeys?function addObjCamelKey(a){return d[dna.util.toCamel(a[c.key])]=a}:function addObj(a){return d[a[c.key]]=a}),d},wrap:function wrap(a){return null===a||a===void 0?[]:Array.isArray(a)?a:[a]}},dnaBrowser={getUrlParams:function getUrlParams(){var a={},b=function(b){return a[b[0]]=b[1]};return window.location.search.slice(1).split("&").forEach(function addPair(a){return a&&b(a.split("="))}),a}},dnaPageToken={put:function put(a,b){return window.sessionStorage[a+window.location.pathname]=JSON.stringify(b),b},get:function get(a,b){var c=window.sessionStorage[a+window.location.pathname];return c===void 0?b:JSON.parse(c)}},dnaUi={deleteElem:function deleteElem(a,b){var c=dna.ui.toElem(a,this);return dna.core.remove(c,b)},focus:function focus(a){return a.trigger("focus")},getAttrs:function getAttrs(a){return a[0]?Object.values(a[0].attributes):[]},getComponent:function getComponent(a){return a.closest("[data-component]")},pulse:function pulse(a,b){var c=_objectSpread(_objectSpread({},{duration:400,interval:0,out:5e3}),b),d={hide:{opacity:0},show:{opacity:1}};return a.stop(!0).slideDown().css(d.hide).animate(d.show,c.duration),c.interval&&a.animate(d.show,c.interval).animate(d.hide,c.out),a},slideFade:function slideFade(a,b,c){var d={opacity:1,transition:"opacity 400ms"},e={transition:"opacity 0s"};return c&&window.setTimeout(function doEaseIn(){return a.css(d)},200)?a.css({opacity:0,transition:"opacity 0s"}).hide().delay(100).slideDown(b||void 0):a.css({opacity:0,transition:"opacity 400ms"}).delay(100).slideUp(b||void 0),a.delay(200).promise().then(function clearTransition(){return a.css(e)}),a},slideFadeIn:function slideFadeIn(a,b){return dna.ui.slideFade(a,b,!0)},slideFadeOut:function slideFadeOut(a,b){return dna.ui.slideFade(a,b,!1)},slideFadeToggle:function slideFadeToggle(a,b){return dna.ui.slideFade(a,b,a.is(":hidden"))},slideFadeDelete:function slideFadeDelete(a,b){return dna.ui.slideFadeOut(a,function(){return dna.ui.deleteElem(a,b)})},smoothHeightSetBaseline:function smoothHeightSetBaseline(a){var b=$("body"),c=b.data().dnaCurrentContainer=a||b,d=c.outerHeight();return c.css({minHeight:d,maxHeight:d,overflow:"hidden"})},smoothHeightAnimate:function smoothHeightAnimate(a,b){var c=b||$("body").data().dnaCurrentContainer;window.setTimeout(function animate(){c.css({minHeight:0,maxHeight:"100vh"});window.setTimeout(function turnOffTransition(){return c.css({transition:"none",maxHeight:"none"})},1e3)},a||50);return window.setTimeout(function setAnimationLength(){return c.css({transition:"all 1s"})},10),c},smoothMove:function smoothMove(a,b,c){var d="function"==typeof c?c:null,e=b?a.prev():a.next();return e.length?function move(){var c=e.clone(!0);b?a.after(e.hide()).before(c):a.before(e.hide()).after(c);var f=0,g=function(){return f++&&d&&d(a)};window.setTimeout(function animate(){dna.ui.slideFadeIn(e,g),dna.ui.slideFadeDelete(c,g)})}():d&&d(a),a},smoothMoveUp:function smoothMoveUp(a,b){return dna.ui.smoothMove(a,!0,b)},smoothMoveDown:function smoothMoveDown(a,b){return dna.ui.smoothMove(a,!1,b)},toElem:function toElem(a,b){var c=a instanceof $&&a,d=a&&a.target;return c||$(d||a||b)}},dnaUtil={apply:function apply(a,b){var c,d=dna.array.wrap(b),e=d[0]instanceof $?d[0]:null,f=function(b,g){var h=function(){return b[g[0]]};b&&(1!==g.length||"function"==typeof b[g[0]])?1===g.length?c=h().apply(e,d):f(h(),g.slice(1)):dna.core.berserk("Callback function not found",a)};return e&&0===e.length?c=e:"function"==typeof a?c=a.apply(e,d):e&&e[a]?c=e[a](d[1],d[2],d[3]):"string"==typeof a&&0<a.length?function findFn(a){e&&d.push(dna.ui.getComponent(e));var b=dna.events.getContextDb(),c=a[0],g=(null,eval);/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(c)&&function isUnknown(){return void 0===window[c]&&!b[c]}()&&function callable(){return["object","function"].includes(g("typeof "+c))}()&&dna.registerContext(c,g(c)),f(b[c]?b:window,a)}(a.split(".")):void 0===a||null===a?c=null:dna.core.berserk("Invalid callback function",a),c},assign:function assign(a,b,c){var d="string"==typeof b?b.split("."):b,e=d[0],f=$.isPlainObject(a)?a:{};return 1===d.length?f[e]=c:dna.util.assign(function nestedData(){return void 0===f[e]?f[e]={}:f[e]}(),d.slice(1),c),f},printf:function printf(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.reduce(function(a,b){return a.replace(/%s/,b+"")},a)},realTruth:function realTruth(a){return!!a&&!function emptyArray(){return a instanceof Array&&0===a.length}()&&!function falseyStr(){return /^(f|false|n|no|0)$/i.test(a+"")}()},toCamel:function toCamel(a){return(a+"").replace(/\-(.)/g,function hump(a,b){return b.toUpperCase()})},toKebab:function toKebab(a){return(""+a).replace(/([A-Z]+)/g,function dash(a){return"-"+a.toLowerCase()}).replace(/\s|^-/g,"")},value:function value(a,b){return"string"==typeof b&&(b=b.split(".")),null===a||void 0===a||void 0===b?null:1===b.length?a[b[0]]:dna.util.value(a[b[0]],b.slice(1))},isObj:function isObj(a){return!!a&&"object"===_typeof(a)&&!Array.isArray(a)}},dnaPlaceholder={setup:function setup(){$("option.dna-template").closest("select").addClass("dna-hide");$("[data-placeholder]").each(function fade(a,b){var c=$(b).stop(!0);dna.getClones(c.data().placeholder).length?c.fadeOut():c.fadeIn()})}},dnaPanels={display:function display(a,b,c){var d=a.data().dnaPanels,e=a.data().nav,f=a.find(".menu-item"),g=function bound(a){return Math.max(0,Math.min(a,f.length-1))}(b===void 0?dna.pageToken.get(e,0):b);a[0].nodeName==="SELECT"&&(a[0].selectedIndex=g),f.removeClass("selected").addClass("unselected"),f.eq(g).addClass("selected").removeClass("unselected"),d.hide().removeClass("displayed").addClass("hidden");var h=d.eq(g).fadeIn().addClass("displayed").removeClass("hidden"),i=h.data().hash;dna.pageToken.put(e,g),c&&i&&window.history.pushState(null,"","#"+i),dna.util.apply(a.data().callback,[h,i])},clickRotate:function clickRotate(a){var b=$(a.target).closest(".menu-item"),c=b.closest(".dna-menu");dna.panels.display(c,c.find(".menu-item").index(b),!0)},selectRotate:function selectRotate(a){var b=$(a.target);dna.panels.display(b,b.find("option:selected").index(),!0)},initialize:function initialize(a){var b=function(){var b="dna-panels-"+$("body").data().dnaPanelNextNav++;return a.attr("data-nav",b).prev(".dna-menu").attr("data-nav",b),b},c=!a.length||a.hasClass("dna-panels-initialized");c||a.children().hasClass("dna-template")||function init(){var c=a.data().nav||b(),d=$(".dna-menu[data-nav="+c+"]").addClass("dna-panels-initialized"),e=a.addClass("dna-panels-initialized").children().addClass("panel"),f=window.location.hash.replace(/[^\w-]/g,""),g=f&&e.first().data().hash?function hashIndex(){return e.filter("[data-hash="+f+"]").index()}():function savedIndex(){return dna.pageToken.get(c,0)}();d.length||dna.core.berserk("Menu not found for panels",c),d.data().dnaPanels=e,d.find(".menu-item").length||d.children().addClass("menu-item"),dna.panels.display(d,g)}()},setup:function setup(){$("body").data().dnaPanelNextNav=1,$(".dna-panels").each(function(a,b){return dna.panels.initialize($(b))}),$(window.document).on({click:dna.panels.clickRotate},".dna-menu .menu-item"),$(window.document).on({change:dna.panels.selectRotate},".dna-menu")}},dnaCompile={regex:{dnaField:/^[\s]*(~~|\{\{).*(~~|\}\})[\s]*$/,dnaBasePair:/~~|{{|}}/,dnaBasePairs:/~~|\{\{|\}\}/g},setupNucleotide:function setupNucleotide(a){return a.data().dnaRules||(a.data().dnaRules={}),a.addClass("dna-nucleotide")},isDnaField:function isDnaField(a,b){var c=b.childNodes[0];return c&&!!c.nodeValue&&function matches(){var a;return!!(null!==(a=c.nodeValue)&&void 0!==a&&a.match(dna.compile.regex.dnaField))}()},addFieldClass:function addFieldClass(a){var b=a.data().dnaField;return b?a.addClass("dna-field-"+function htmlCase(){return dna.util.toKebab(b).replace(/[\[\]]/g,"").replace(/[.]/g,"-")}()):a},field:function field(a,b){var c=dna.compile.setupNucleotide($(b));c.data().dnaField=c.text().replace(dna.compile.regex.dnaBasePairs,"").trim(),dna.compile.addFieldClass(c),c.is("textarea")?c.addClass("dna-update-model").data().dnaRules.val=!0:c.data().dnaRules.text=!0,c.empty()},propsAndAttrs:function propsAndAttrs(a,b){var c=$(b),d=[],e=[],f=[],g=function(a,b){f.push(a),a=a.replace(/^data-prop-/,"").toLowerCase(),b=b.replace(dna.compile.regex.dnaBasePairs,""),d.push(a,b),"checked"===a&&c.is("input")&&(c.addClass("dna-update-model").data().dnaField=b)},h=function(a,b){var d=b.split(dna.compile.regex.dnaBasePair);"[count]"===d[1]?d[1]=1:"[value]"===d[1]&&(d[1]=2),e.push(a.replace(/^data-attr-/,""),d),f.push(a);var g=c.is("input:not(:checkbox, :radio)")&&"value"===a&&""===d[0]&&""===d[2];(g||c.is("select")&&"data-option"===a)&&function makeUpdatable(){dna.compile.setupNucleotide(c).addClass("dna-update-model"),c.data().dnaField=d[1],c.data().dnaRules.val=!0}()};dna.ui.getAttrs(c).forEach(function compile(a){/^data-prop-/.test(a.name)?g(a.name,a.value):3===a.value.split(dna.compile.regex.dnaBasePair).length&&h(a.name,a.value)});var i=function(){return dna.compile.setupNucleotide(c).data().dnaRules};0<d.length&&(i().props=d),0<e.length&&(i().attrs=e),c.data().transform&&(i().transform=c.data().transform),c.data().callback&&(i().callback=c.data().callback),dna.compile.addFieldClass(c),c.removeAttr(f.join(" "))},getDataField:function getDataField(a,b){return a.data(b).replace(dna.compile.regex.dnaBasePairs,"").trim()},subTemplateName:function subTemplateName(a,b){var c=a instanceof $?function getRules(){return dna.getClone(a,{main:!0}).data().dnaRules}().template:a;return c+"-"+b+"-instance"},rules:function rules(a,b,c){return a.filter("[data-"+b+"]").each(function addRule(a,d){var e=dna.compile.setupNucleotide($(d)),f=dna.compile.getDataField(e,b);e.data().dnaRules[b]=c?function makeLists(){return f.split(";").map(function(a){return a.split(",")})}():f}).removeAttr("data-"+b)},separators:function separators(a){var b=function(a,b){return 3===b.nodeType&&!/\S/.test(b.nodeValue)},c=function(a,c,d){return c&&function doAppend(){a.contents().last().filter(b).remove(),a.append($("<span>").addClass(d).html(c))}()};return a.find(".dna-template, .dna-sub-clone").addBack().each(function processTemplate(a,b){var d=$(b);c(d,d.data().separator,"dna-separator"),c(d,d.data().lastSeparator,"dna-last-separator")})},template:function template(a){var b=$("#"+a);b.length||dna.core.berserk("Template not found",a);var c=function(a,b){$(b).data().dnaRules.subs=[]};b.find(".dna-template").addBack().each(function saveName(a,b){$(b).data().dnaRules={template:$(b).attr("id"),subs:[]}}).removeAttr("id").each(c);var d=b.find("*").addBack();d.filter(dna.compile.isDnaField).each(dna.compile.field).addClass("dna-field"),dna.compile.rules(d,"array").addClass("dna-sub-clone").each(c),dna.compile.rules(d,"class",!0),dna.compile.rules(d,"require"),dna.compile.rules(d,"missing"),dna.compile.rules(d,"true"),dna.compile.rules(d,"false"),d.each(dna.compile.propsAndAttrs),dna.compile.separators(b);return $("input[data-attr-type]").each(function setTypeAttr(a,b){$(b).attr({type:$(b).data().attrType})}),dna.store.stash(b)}},dnaStore={getTemplateDb:function getTemplateDb(){var a=$("body").data();return a.dnaTemplateDb||function initStore(){return a.dnaTemplateDb={}}()},stash:function stash(a){var b=a.data().dnaRules.template,c=function(a,b){var c=$(b),d=c.data().dnaRules.template,e=c.parent(),f=1===e.children().length&&!e.hasClass("dna-container");f||e.data().dnaContents||function compileSiblings(){e.data().dnaContents=!0;e.data().dnaContents=e.children().toArray().map(function templateName(a){var b=$(a);return b.hasClass("dna-template")?function compileToName(a){return a?dna.compile.template(a).name:d}(b.attr("id")):!!b.hasClass("dna-sub-clone")&&b.data().dnaRules.template})}();var g={name:d,elem:c,container:e.addClass("dna-container").addClass("dna-contains-"+d),nested:0!==e.closest(".dna-clone").length,separators:c.find(".dna-separator, .dna-last-separator").length,wrapped:f};dna.store.getTemplateDb()[d]=g,c.removeClass("dna-template").addClass("dna-clone").addClass(d).detach()};return a.find(".dna-template").addBack().each(c),a.find(".dna-sub-clone").each(function prepLoop(a,c){var d=$(c).data().dnaRules,e=dna.compile.setupNucleotide($(c).parent()).addClass("dna-array");d.template=dna.compile.subTemplateName(b,d.array),e.data().dnaRules.loop={name:d.template,field:d.array},e.closest(".dna-clone, .dna-sub-clone").data().dnaRules.subs.push(d.array)}).each(c),dna.store.getTemplateDb()[b]},getTemplate:function getTemplate(a){return dna.store.getTemplateDb()[a]||dna.compile.template(a)}},dnaEvents={getContextDb:function getContextDb(){var a=$("body").data();return a.dnaContextDb||function initStore(){return a.dnaContextDb={}}()},getInitializers:function getInitializers(){var a=$("body").data();return a.dnaInitializers||function initStore(){return a.dnaInitializers=[]}()},runOnLoads:function runOnLoads(){return $("[data-on-load]").not(".dna-loaded").each(function run(a,b){return dna.util.apply($(b).data().onLoad,$(b))}).addClass("dna-loaded")},runInitializers:function runInitializers(a){return dna.events.getInitializers().forEach(function init(b){var c=b.selector?function find(b){return a.find(b).addBack(b)}(b.selector):a,d=dna.array.wrap(b.params),e=[c.addClass("dna-initialized")].concat(d);dna.util.apply(b.fn,e)}),a},setup:function setup(){var a=function(b,c,d){var e=b.closest("[data-"+c+"]"),f=e.data(c),g=e[0]&&"A"===e[0].nodeName;"click"===c&&g&&f&&f.match(/^dna[.]/)&&d.preventDefault();var h=e.parent().closest("[data-click]");return"click"===c&&h.length&&a(h,c,d),dna.util.apply(f,[e,d])},b=function(b){var c=$(b.target),d=function(a,b){return dna.util.assign(dna.getModel(a),a.data().dnaField,b(a))},e=function(a){return a.val()},f=function(a){return a.is(":checked")},g=function(a,b){d($(b),f)};return c.hasClass("dna-update-model")&&function updateModel(){var a=dna.getClone(c,{main:!0});0===a.length||(c.is("input:checkbox")?d(c,f):c.is("input:radio")?$("input:radio[name="+c.attr("name")+"]").each(g):c.data().dnaRules.val&&d(c,e),dna.refresh(a))}(),a(c,b.type.replace("key","key-"),b)},c=function(b){var c=$(b.target),d=c.data(),e=function(){d.dnaLastUpdated=Date.now(),d.dnaLastValue=c.val(),d.dnaTimeoutId=null,a(c,"smart-update",b)},f=function(){var a=d.smartThrottle?+d.smartThrottle:1000;Date.now()<d.dnaLastUpdated+a?d.dnaTimeoutId=window.setTimeout(e,a):e()},g=function(){c.val()===d.dnaLastValue||d.dnaTimeoutId||f()};d.smartUpdate&&function processSmartUpdate(){"keydown"===b.type&&d.dnaLastValue===void 0&&(d.dnaLastValue=c.val()),window.setTimeout(g)}()},d=function(b){return function(c){return a($(c.target),b,c)}};$(window.document).on({click:b,change:b,keydown:b,keypress:b,keyup:b,input:b}).on({keydown:c,keyup:c,change:c,cut:c,paste:c}).on({keyup:function handleEnterKey(b){return"Enter"===b.key&&a($(b.target),"enter-key",b)}}).on({click:function jumpToUrl(a){var b=$(a.target).closest("[data-href]"),c=/iPad|iPhone|iPod/.test(window.navigator.userAgent)&&/Apple/.test(window.navigator.vendor),d=b.closest(".external-site").length?"_blank":"_self";window.open(b.data().href,c?"_self":b.data().target||d)}},"[data-href]").on({focusin:d("focus-in")},"[data-focus-in]").on({focusout:d("focus-out")},"[data-focus-out]").on({mouseenter:d("hover-in")},"[data-hover-in]").on({mouseleave:d("hover-out")},"[data-hover-out]"),dna.events.runOnLoads()}},dnaCore={inject:function inject(a,b,c,d){var e=function(a,e){var f="[count]"===e?c:"[value]"===e?b:dna.util.value(b,e);-1!==["string","number","boolean"].indexOf(_typeof(f))&&(a=d.html?a.html(f+""):a.text(f+""))},f=function(a,d){var e="[count]"===d?c:"[value]"===d?b:dna.util.value(b,d);null!==e&&e!==a.val()&&a.val(e+"")},g=function(a,c){for(var d=0;d<c.length/2;d++)a.prop(c[2*d],dna.util.realTruth(dna.util.value(b,c[2*d+1])))},h=function(a,d){for(var k=0;k<d.length/2;k++){var e=d[2*k],f=d[2*k+1],g=f[1],h=1===g?c:2===g?b:dna.util.value(b,g),j=[f[0],h,f[2]].join("");a.attr(e,j),/^data-./.test(e)&&a.data(e.substring(5),j),"value"===e&&j!==a.val()&&a.val(j)}},i=function(a,c){c.forEach(function process(c){var d=dna.util.value(b,c[0]),e=dna.util.realTruth(d);1===c.length?a.addClass(d+""):1<c.length&&function setBooleanClasses(){a.toggleClass(c[1],e),c[2]&&a.toggleClass(c[2],!e)}()})},j=function(a){var c=dna.util.value(b,a);return void 0!==c&&null!==c},k=function(a,c){var e=dna.util.value(b,c.field),f=a.children("."+c.name.replace(/[.]/g,"\\."));e?e.length===f.length?f.each(function injectSubClone(a,b){var c=$(b);c.is("option")||dna.core.inject(c,e[a],a+1,d)}):function rebuildSubClones(){f.remove(),dna.clone(c.name,e,{container:a,html:d.html})}():b[c.field]=[]},l=function process(a,c){var d=$(c),l=d.data().dnaRules;l.transform&&dna.util.apply(l.transform,b),l.loop&&k(d,l.loop),l.text&&e(d,d.data().dnaField),l.val&&f(d,d.data().dnaField),l.props&&g(d,l.props),l.attrs&&h(d,l.attrs),l["class"]&&i(d,l["class"]),l.require&&d.toggle(j(l.require)),l.missing&&d.toggle(!j(l.missing)),l["true"]&&d.toggle(dna.util.realTruth(dna.util.value(b,l["true"]))),l["false"]&&d.toggle(!dna.util.realTruth(dna.util.value(b,l["false"]))),l.callback&&dna.util.apply(l.callback,d)},m=function(a){a.filter(".dna-nucleotide").each(l),a.length&&m(a.children().not(".dna-sub-clone"))};return d.transform&&d.transform(b),m(a),a.data().dnaModel=b,a.data().dnaCount=c,a},replicate:function replicate(a,b,c){var d=".dna-contains-"+a.name.replace(/[.]/g,"\\."),e=c.container?c.container.find(d).addBack(d):a.container,f=a.elem.clone(!0,!0),g=f.data().dnaRules.template;e.data().dnaCountsMap||(e.data().dnaCountsMap={});var h=e.data().dnaCountsMap;h[g]=(h[g]||0)+1,dna.core.inject(f,b,h[g],c);return a.wrapped?c.top?e.prepend(f):e.append(f):function intoUnwrapped(){var b=e.children(".dna-clone"),d=b.filter("."+a.name);d.length?c.top?d.first().before(f):d.last().after(f):function firstClone(){var c=e.data().dnaContents,d=c.indexOf(a.name),g=e.children().eq(d+c.reduce(function adjustment(a,e){return a+(e&&c.indexOf(e)<d?b.filter("."+e).length-1:0)},0));g.length?g.before(f):e.append(f)}()}(),a.separators&&function displaySeparators(){var b=e.children("."+a.name);b.find(".dna-separator").show().end().last().find(".dna-separator").hide(),b.find(".dna-last-separator").hide().end().eq(-2).find(".dna-last-separator").show().closest(".dna-clone").find(".dna-separator").hide()}(),dna.events.runInitializers(f),c.callback&&c.callback(f,b),c.fade&&dna.ui.slideFadeIn(f),f},getArrayName:function getArrayName(a){return a.hasClass("dna-sub-clone")?a.data().dnaRules.array:null},updateArrayByName:function updateArrayByName(a,b){return b?function update(a,b){var c=dna.compile.subTemplateName(a,b);return a.data().dnaRules.subs.includes(b)&&(dna.getModel(a)[b]=a.find("."+c).toArray().map(function(a){return dna.getModel($(a))})),a}(dna.getClone(a),b):a},updateArray:function updateArray(a){var b=dna.getClone(a.first());return dna.core.updateArrayByName(b.parent(),dna.core.getArrayName(b)),b},remove:function remove(a,b){var c=a.parent();return a.detach(),dna.core.updateArrayByName(c,dna.core.getArrayName(a)),dna.placeholder.setup(),a.remove(),b&&b(a),a},berserk:function berserk(a,b){try{throw Error("dna.js ~~ "+a+" ["+(b+"")+"]")}catch(a){throw console.error(a.stack),Error(a)}},plugin:function plugin(){$.fn.dna=function(a){var b=[arguments[1],arguments[2],arguments[3]],c=dna[dna.util.toCamel(a)];c||dna.core.berserk("Unknown plugin action",a);this.each(function callApi(a,d){return c($(d),b[0],b[1],b[2])})}},setup:function setup(){return"object"===("undefined"==typeof window?"undefined":_typeof(window))&&function setupBrowser(){dna.core.plugin(),$(dna.placeholder.setup),$(dna.panels.setup),$(dna.events.setup)}(),dna}},dna={version:"1.7.1",clone:function clone(a,b,c){var d,e=_objectSpread(_objectSpread({},{fade:!1,top:!1,container:null,empty:!1,clones:1,html:!1,transform:null,callback:null}),c),f=dna.store.getTemplate(a);f.nested&&!e.container&&dna.core.berserk("Container missing for nested template",a),e.empty&&dna.empty(a);var g=(d=[]).concat.apply(d,_toConsumableArray(Array(e.clones).fill(b))),h=$(),i=function(a){return h=h.add(dna.core.replicate(f,a,e))};return g.forEach(i),dna.placeholder.setup(),dna.panels.initialize(h.first().closest(".dna-panels")),h.first().parents(".dna-hide").removeClass("dna-hide").addClass("dna-unhide"),h},cloneSub:function cloneSub(a,b,c,d){var e=dna.compile.subTemplateName(a,b),f=".dna-contains-"+e,g={container:a.find(f).addBack(f)},h=dna.clone(e,c,_objectSpread(_objectSpread({},g),d));return dna.core.updateArray(h),h},createTemplate:function createTemplate(a,b,c){return $(b).attr({id:a}).addClass("dna-template").appendTo(c),dna.store.getTemplate(a)},templateExists:function templateExists(a){return!!dna.store.getTemplateDb()[a]||0<$(".dna-template#"+a).length},getModel:function getModel(a,b){var c=function(a){return dna.getClone($(a),b).data("dnaModel")};return"string"==typeof a?function getAll(a){return dna.getClones(a).toArray().map(function(a){return c($(a))})}(a):c(a)},empty:function empty(a,b){var c=_objectSpread(_objectSpread({},{fade:!1,callback:null}),b),d=dna.store.getTemplate(a),e=d.container.children(".dna-clone");d.container.data().dnaCountsMap&&(d.container.data().dnaCountsMap[a]=0);return c.fade?function fadeDelete(){return dna.ui.slideFadeDelete(e,c.callback)}():dna.core.remove(e,c.callback)},insert:function insert(a,b,c){var d=dna.getClones(a).first();return d.length?dna.refresh(d,{data:b,html:c&&c.html}):dna.clone(a,b,c)},refresh:function refresh(a,b){var c=_objectSpread(_objectSpread({},{html:!1}),b),d=dna.getClone(a,b),e=c.data?c.data:dna.getModel(d);return dna.core.inject(d,e,d.data().dnaCount,c)},refreshAll:function refreshAll(a,b){var c=dna.getClones(a);return c.each(function refresh(a,c){dna.refresh($(c),b)})},updateField:function updateField(a,b){var c=a.data()&&a.data().dnaField;return c&&function update(){a.is("input:checkbox")?a.prop("checked",!!b):a.is("input:radio")?a.prop("checked",!!b):a.is("input, select, textarea")&&a.val(b+"");var d=dna.getModel(a);d[c]=b}(),a},recount:function recount(a,b){a=dna.getClone(a);var c=function(){var c=a.data().dnaRules.template,d=a.parent(),e=d.children(".dna-clone."+c).each(function update(a,c){var d=$(c);d.data().dnaCount=a+1,dna.refresh(d,b)});d.data().dnaCountsMap=d.data().dnaCountsMap||{},d.data().dnaCountsMap[c]=e.length};return a.length&&c(),a},destroy:function destroy(a,b){var c=_objectSpread(_objectSpread({},{main:!1,fade:!1,callback:null}),b);a=dna.getClone(a,b);var d=dna.core.getArrayName(a);d&&dna.getModel(a.parent())[d].splice(dna.getIndex(a),1);var e=function(){return dna.ui.slideFadeDelete(a,c.callback)};return c.fade?e():dna.core.remove(a,c.callback)},getClone:function getClone(a,b){var c=_objectSpread(_objectSpread({},{main:!1}),b),d=c.main?".dna-clone:not(.dna-sub-clone)":".dna-clone";return a instanceof $?a.closest(d):$()},getClones:function getClones(a){return dna.store.getTemplate(a).container.children(".dna-clone."+a)},getIndex:function getIndex(a,b){var c=dna.getClone(a,b);return c.parent().children(".dna-clone."+c.data().dnaRules.template).index(c)},up:function up(a,b){var c=dna.ui.toElem(a,this);return dna.ui.smoothMoveUp(dna.getClone(c),b)},down:function down(a,b){var c=dna.ui.toElem(a,this);return dna.ui.smoothMoveDown(dna.getClone(c),b)},bye:function bye(a,b){var c=dna.ui.toElem(a,this),d="function"==typeof b?b:null;return dna.destroy(c,{fade:!0,callback:d})},registerInitializer:function registerInitializer(a,b){var c=_objectSpread(_objectSpread({},{selector:null,params:null,onDocLoad:!0}),b),d=c.selector;c.onDocLoad&&dna.util.apply(a,[function onDocLoadElems(){return d?$(d).not(".dna-template").not(d).addClass("dna-initialized"):$(window.document)}()].concat(dna.array.wrap(c.params)));var e={fn:a,selector:d,params:c.params};return dna.events.getInitializers().push(e),dna.events.getInitializers()},clearInitializers:function clearInitializers(){dna.events.getInitializers().splice(0)},registerContext:function registerContext(a,b){return dna.events.getContextDb()[a]=b,dna.events.getContextDb()},initGlobal:function initGlobal(a,b){return global.window=a,global.document=a.document,global.$=b,dna.core.setup()},info:function info(){var a=Object.keys(dna.store.getTemplateDb()),b=$(".dna-menu.dna-panels-initialized");return{version:dna.version,templates:a.length,clones:$(".dna-clone:not(.dna-sub-clone)").length,subs:$(".dna-sub-clone").length,names:a,store:dna.store.getTemplateDb(),initializers:dna.events.getInitializers(),panels:b.toArray().map(function(a){return $(a).attr("data-nav")})}},array:dnaArray,browser:dnaBrowser,pageToken:dnaPageToken,ui:dnaUi,util:dnaUtil,placeholder:dnaPlaceholder,panels:dnaPanels,compile:dnaCompile,store:dnaStore,events:dnaEvents,core:dnaCore};dna.core.setup(),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&(module.exports={dna:dna,default:dna}),"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(window.dna=dna);
